<!DOCTYPE html>
<html class="um landscape min-width-240px min-width-320px min-width-480px min-width-768px min-width-1024px">
    <head>
        <title></title>
        <meta charset="utf-8">
        <meta name="viewport" content="target-densitydpi=device-dpi, width=device-width, initial-scale=1, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <link rel="stylesheet" href="../css/fonts/font-awesome.min.css">
        <link rel="stylesheet" href="../css/ui-box.css">
        <link rel="stylesheet" href="../css/ui-base.css">
        <link rel="stylesheet" href="../css/ui-color.css">
        <link rel="stylesheet" href="../css/appcan.icon.css">
        <link rel="stylesheet" href="../css/appcan.control.css">
        <link rel="stylesheet" href="userInfo_content/css/main.css">
        <style>
            .txt-color {
                color: #3BA6E7;
            }

            .lis-icon {
                width: 2.5em;
                min-height: 2.5em;
                margin: 0;
            }
            .uinn {
                padding: 0.7em;
            }
            .uinput textarea {
                min-height: 5em;
            }
        </style>
    </head>
    <body class="um-vp bc-bg" ontouchstart>
        <div class="c-gra1 uinn-a1 ub">
            <div id="userHead" class="ub-f1 ub ub-ver ub-ac ub-pc">
                <div class="uwh-set3 pos_re">
                    <div id="headUri" class="ub-img1 uwh-set3 uc-a-set3 uba bc-border ub ub-ac ub-pc">
                        <div class="lis-icon ub-img userHeader" ></div>
                    </div>
                </div>
                <div class="umar-at1 ulev-4">
                    点击上传头像
                </div>
            </div>
        </div>
        <div class="ub ub-ver ub-f1 c-wh">
            <div id="resumeStatus" class="ub uinn ub-ac ub-f1 ubb bc-border uhide">
                <div class="ub ub-ac ub-pc" style="color: red">
                    *
                </div>
                <div class="ub-f1 ulev-5">
                    求职状态
                </div>
                <div class="select sc-text">
                    <div class="ulev-5 text txt-color">
                        请选择求职状态
                    </div>
                    <div class="fa fa-angle-right ulev2 sc-text"></div>
                    <select data-id="resumeStatus" selectedindex="0">
                        <option value="请选择求职状态">请选择求职状态</option>
                        <option value="求职中">求职中</option>
                        <option value="休假中">休假中</option>
                        <option value="已上船">已上船</option>
                    </select>
                </div>
            </div>
            <div class="ub uinn ub-ac ubb bc-border ub-f1">
                <div class="ub ub-ac ub-pc" style="color: red">
                    *
                </div>
                <div id="compName" class="ulev-5 umar-r">
                    姓名
                </div>
                <div class="tx-r ulev-5 txt-gray ub-f1">
                    <div class="uinput ub ub-f1">
                        <input id="cnName"  placeholder="请输入中文名(必填)" type="text" class="ub-f1 tx-r txt-color" maxlength="50" style="padding-right: 1.5em">
                    </div>
                </div>
            </div>
            <div id="enterprise" class="ub ub-ver ub-f1 uhide">
                <div id="compType" class="ub uinn ub-ac ub-f1 ubb bc-border">
                    <div class="ub ub-ac ub-pc" style="color: red">
                        *
                    </div>
                    <div class="ub-f1 ulev-5">
                        公司性质
                    </div>
                    <div class="select sc-text">
                        <div class="ulev-5 text txt-color">
                            请选择公司性质
                        </div>
                        <div class="fa fa-angle-right ulev2 sc-text"></div>
                        <select data-id="compType" selectedindex="0">
                            <option value="">请选择公司性质</option>
                            <option value="船东">船东</option>
                            <option value="甲级管理公司">甲级管理公司</option>
                            <option value="乙级管理公司">乙级管理公司</option>
                            <option value="中介公司">中介公司</option>
                            <option value="学校">学校</option>
                        </select>
                    </div>
                </div>
                <div class="ub uinn ub-ac ub-f1 ubb bc-border ">
                    <div class="ub-f1 ulev-5">
                        公司网址
                    </div>
                    <div class="tx-r ulev-5 txt-gray ub-f1">
                        <div class="uinput ub ub-f1">
                            <input id="compWebUrl" placeholder="http://" type="url" class="ub-f1 tx-r txt-color">
                        </div>
                    </div>
                </div>
                <div class="ub uinn ubb bc-border ub-f1 ub-ver ">
                    <div  class="ulev-5 umar-b">
                        公司简介
                    </div>
                    <div class="uba bc-border uinput ub ub-f1">
                        <textarea id="compRemark" placeholder="请输入公司简介(必填),请调整清晰格式，方便阅读" type="text" class="ub-f1 ulev-1" ></textarea>
                    </div>
                </div>
                <div id="compArea" class="ub uinn ub-ac ub-f1 ubb bc-border ">
                    <div class="ub-f1 ulev-5">
                        所在地区
                    </div>
                    <div class="ub ub-pe ub-ac sc-text">
                        <div class="ulev-5 txt-color" style="margin-right:0.5em;">
                            点击选择所在地区
                        </div>
                        <div class="fa fa-angle-right ulev2 sc-text"></div>
                    </div>
                </div>
                <div id="compAddr" class="ub uinn ub-ac ub-f1 ubb bc-border uhide">
                    <div class="ub ub-f1 ulev-5 umar-r" style="min-width: 4em">
                        详细地址
                    </div>
                    <div class="ub ub-ac ub-pe sc-text ut-s ub-f1">
                        <div class="tx-r ulev-5 txt-color ut-s ub-f1" style="margin-right:0.5em;">
                            点击设置详细地址
                        </div>
                        <div class="fa fa-angle-right ulev2 sc-text"></div>
                    </div>
                </div>
                <div class="ub ub-f1 ub-ver">
                    <div class="ub ulev-1 uinn5 sc-text" style="background-color: #F9F9F9">
                        联系人列表
                    </div>
                    <div id="contactList">
                        <ul>
                            <div onclick="openContatList()" class="ub ubt bc-border uinn3 ub-pc">
                                <div class="ub ub-pc ub-ac uinn ulev-5 sc-text-warn " style="min-height:4em">
                                    还没有联系人，点击添加
                                </div>
                            </div>
                        </ul>
                    </div>
                </div>
            </div>
            <div id="otherMsg" class="ub ub-ver ub-f1 uhide">
                <div id="idCode" class="ub uinn ub-ac ub-f1 ubb bc-border">
                    <div class="ub ub-ac ub-pc" style="color: red">
                        *
                    </div>
                    <div class="ub-f1 ulev-5" style="min-width: 5em">
                        身份证号
                    </div>
                    <div class="ub ub-ac sc-text ub-f1">
                        <div class="ulev-5 ub-f1 tx-r ut-s txt-color" style="margin-right:0.5em;">
                            点击设置身份证号
                        </div>
                        <div class="fa fa-angle-right ulev2 sc-text"></div>
                    </div>
                </div>
                <div id="sex" class="ub uinn ub-ac ub-f1 ubb bc-border">
                    <div class="ub ub-ac ub-pc" style="color: red">
                        *
                    </div>
                    <div class="ub-f1 ulev-5">
                        性别
                    </div>
                    <div class="select sc-text">
                        <div class="ulev-5 text txt-color">
                            请选择性别
                        </div>
                        <div class="fa fa-angle-right ulev2 sc-text"></div>
                    </div>
                </div>
                <div id="birthday" class="ub uinn ub-ac ub-f1 ubb bc-border">
                    <div class="ub ub-ac ub-pc" style="color: red">
                        *
                    </div>
                    <div class="ub-f1 ulev-5">
                        出生日期
                    </div>
                    <div class="ub ub-pe ub-ac sc-text">
                        <div class="ulev-5 txt-color" style="margin-right:0.5em;">
                            请选择出生日期
                        </div>
                        <div class="fa fa-angle-right ulev2 sc-text"></div>
                    </div>
                </div>
                <div id="livingPlace" class="ub uinn ub-ac ub-f1 ubb bc-border">
                    <div class="ub ub-ac ub-pc" style="color: red">
                        *
                    </div>
                    <div class="ub-f1 ulev-5">
                        现居住地
                    </div>
                    <div class="ub ub-pe ub-ac sc-text">
                        <div class="ulev-5 txt-color" style="margin-right:0.5em;">
                            点击设置现居住地
                        </div>
                        <div class="fa fa-angle-right ulev2 sc-text"></div>
                    </div>
                </div>
                <div id="jobTitle" class="ub uinn ub-ac ub-f1 ubb bc-border">
                    <div class="ub-f1 ulev-5 ub-ac ub">
                        现任职务
                    </div>
                    <div class="select sc-text">
                        <div class="ulev-5 text txt-color">
                            请选择现任职务
                        </div>
                        <div class="fa fa-angle-right ulev2 sc-text"></div>
                        <select data-id="jobTitle" selectedindex="0"></select>
                    </div>
                </div>
                <div id="certificateLv" class="ub uinn ub-ac ub-f1 ubb bc-border">
                    <div class="ub-f1 ulev-5 ub-ac ub">
                        证书等级
                    </div>
                    <div class="select sc-text">
                        <div class="ulev-5 text txt-color">
                            请选择证书等级
                        </div>
                        <div class="fa fa-angle-right ulev2 sc-text"></div>
                        <select data-id="certificateLv" selectedindex="0"></select>
                    </div>
                </div>
                <div class="ub uinn ub-ac ub-f1 ubb bc-border">
                    <div class="ub-f1 ulev-5">
                        民族
                    </div>
                    <div class="tx-r ulev-5 txt-gray ub-f1">
                        <div class="uinput ub ub-f1">
                            <input id="nation" placeholder="请输入民族(如：汉)" type="text" class="ub-f1 tx-r txt-color" style="padding-right: 1.5em;">
                        </div>
                    </div>
                </div>
                <div class="ub uinn ub-ac ub-f1 ubb bc-border">
                    <div class="ub-f1 ulev-5">
                        身高
                    </div>
                    <div class="tx-r ulev-5 txt-gray ub-f1">
                        <div class="uinput ub ub-f1">
                            <input id="bodyHeight" placeholder="请输入身高" type="number" class="ub-f1 tx-r txt-color">
                        </div>
                    </div>
                    <div class="ulev-5 umar-l">
                        cm
                    </div>
                </div>
                <div id="birthPlace" class="ub uinn ub-ac ub-f1 ubb bc-border">
                    <div class="ub-f1 ulev-5">
                        籍贯
                    </div>
                    <div class="ub ub-pe ub-ac sc-text">
                        <div class="ulev-5 txt-color" style="margin-right:0.5em;">
                            点击设置籍贯
                        </div>
                        <div class="fa fa-angle-right ulev2 sc-text"></div>
                    </div>
                </div>
                <div class="ub uinn ub-ac ub-f1 ubb bc-border">
                    <div class="ub-f1 ulev-5">
                        毕业院校
                    </div>
                    <div class="tx-r ulev-5 txt-gray ub-f1">
                        <div class="uinput ub ub-f1">
                            <input id="school" placeholder="请输入学校名称" type="text" class="ub-f1 tx-r txt-color" style="padding-right: 1.5em;">
                        </div>
                    </div>
                </div>
                <div id="profession" class="ub uinn ub-ac ub-f1 ubb bc-border">
                    <div class="ub-f1 ulev-5">
                        所学专业
                    </div>
                    <div class="select sc-text">
                        <div class="ulev-5 text txt-color">
                            请选择所学专业
                        </div>
                        <div class="fa fa-angle-right ulev2 sc-text"></div>
                        <select data-id="profession" selectedindex="0">
                            <option value="">请选择所学专业</option>
                            <option value="航海技术">航海技术</option>
                            <option value="轮机工程">轮机工程</option>
                            <option value="船舶电气">船舶电气</option>
                            <option value="其他">其他</option>
                        </select>
                    </div>
                </div>
                <div id="graduationDate" class="ub uinn ub-ac ub-f1 ubb bc-border">
                    <div class="ub-f1 ulev-5">
                        毕业时间
                    </div>
                    <div class="ub ub-pe ub-ac sc-text">
                        <div class="ulev-5 txt-color" style="margin-right:0.5em;">
                            点击设置毕业时间
                        </div>
                        <div class="fa fa-angle-right ulev2 sc-text"></div>
                    </div>
                </div>
                <div class="ub uinn ub-ac ub-f1 ubb bc-border">
                    <div class="ub-f1 ulev-5">
                        航海经验
                    </div>
                    <div class="tx-r ulev-5 txt-gray ub-f1">
                        <div class="uinput ub ub-f1">
                            <input id="shipExp" placeholder="请输入航海经验" type="number" class="ub-f1 tx-r txt-color">
                        </div>
                    </div>
                    <div class="ulev-5 umar-l">
                        年
                    </div>
                </div>
                <div id="foreignLanguage" class="ub uinn ub-ac ub-f1 ubb bc-border">
                    <div class="ub-f1 ulev-5">
                        外语水平
                    </div>
                    <div class="select sc-text">
                        <div class="ulev-5 text txt-color">
                            请选择外语水平
                        </div>
                        <div class="fa fa-angle-right ulev2 sc-text"></div>
                        <select data-id="foreignLanguage" selectedindex="0">
                            <option value="">请选择外语水平</option>
                            <option value="一般">一般</option>
                            <option value="熟练">熟练</option>
                            <option value="优秀">优秀</option>
                        </select>
                    </div>
                </div>
                <div class="ub uinn ubb bc-border ub-f1 ub-ver">
                    <div  class="ulev-5 umar-b">
                        特殊技能
                    </div>
                    <div class="uba bc-border uinput ub ub-f1">
                        <textarea id="specSkill" placeholder="请输入特殊技能,请调整清晰格式，方便阅读" type="text" class="ub-f1 ulev-1" ></textarea>
                    </div>
                </div>
                <div class="ub uinn ubb bc-border ub-f1 ub-ver">
                    <div  class="ulev-5 umar-b">
                        求职备注
                    </div>
                    <div class="uba bc-border uinput ub ub-f1">
                        <textarea id="resumeRemark" placeholder="请输入求职备注,请调整清晰格式，方便阅读" type="text" class="ub-f1 ulev-1" ></textarea>
                    </div>
                </div>
            </div>
        </div>
        <div class="ub ub-f1 ub-ver person uhide">
            <div class="ub ulev-1 uinn5 sc-text" style="background-color: #F9F9F9">
                默认联系方式
            </div>
            <div class="ub ub-ver ub-f1 c-wh">
                <div id="mobile" class="ub uinn ub-ac ub-f1 ubb bc-border">
                    <div class="ub ub-ac ub-pc" style="color: red">
                        *
                    </div>
                    <div class="ub-f1 ulev-5">
                        手机号
                    </div>
                    <div class="ub ub-pe ub-ac sc-text">
                        <div class="ulev-5 txt-color" style="margin-right:0.5em;">

                        </div>
                        <div class="fa fa-angle-right ulev2 sc-text"></div>
                    </div>
                </div>
                <div class="ub uinn ub-ac ub-f1 ubb bc-border">
                    <div class="ub-f1 ulev-5">
                        邮箱
                    </div>
                    <div class="tx-r ulev-5 txt-gray ub-f1">
                        <div class="uinput ub ub-f1">
                            <input id="email" placeholder="请输入电子邮箱(必填)" type="email" class="ub-f1 tx-r txt-color">
                        </div>
                    </div>
                </div>
                <div class="ub uinn ub-ac ub-f1 ubb bc-border">
                    <div class="ub-f1 ulev-5">
                        QQ
                    </div>
                    <div class="tx-r ulev-5 txt-gray ub-f1">
                        <div class="uinput ub ub-f1">
                            <input id="QQ" placeholder="请输入QQ号(选填)" type="text" class="ub-f1 tx-r txt-color">
                        </div>
                    </div>
                </div>
                <div class="ub uinn ub-ac ub-f1 ubb bc-border">
                    <div class="ub-f1 ulev-5">
                        微信
                    </div>
                    <div class="tx-r ulev-5 txt-gray ub-f1">
                        <div class="uinput ub ub-f1">
                            <input id="wechat" placeholder="请输入微信号(选填)" type="text" class="ub-f1 tx-r txt-color">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script src="../js/appcan.js"></script>
        <script src="../js/appcan.control.js"></script>
        <script src="../js/appcan.listview.js"></script>
        <script src="../js/config.js"></script>
        <script src="../js/md5.js"></script>
        <script src="../js/project.js"></script>
        <script src="../js/mycitys.js"></script>
        <script src="../js/options.js"></script>
    </body>
    <script>
        //弹出菜单类型,0选择照片类型，1选择性别，默认0
        var type = 0;
        var userinfo;
        var pickViewType = 1;
        window.onerror = function(sMessage, sUrl, sLine) {
            if (sMessage.indexOf("evaluating 'document'") == -1) {
                App.Logs(sMessage + " " + sUrl + " " + sLine)
            }
        }
        appcan.ready(function() {
            if (!isdebug) {
                uexWindow.setWindowScrollbarVisible(false);
                uexWheelPickView.onConfirmClick = function(data) {
                    App.Logs("uexWheelPickView.onConfirmClick:" + data)
                    var obj = App.toJson(data);
                    if (pickViewType == 3) {
                        $('#compArea .txt-color').html(obj.data.join(" "));
                        var compArea = obj.data.join(" ");
                        App.authApi({
                            url : "user/updateUserInfo",
                            data : {
                                params : {
                                    userId : userinfo.userid,
                                    updateKey : "compArea",
                                    updateVal : compArea
                                }
                            },
                            callBack : function(data) {
                                if (data.code == 0) {
                                    userinfo.comparea = compArea;
                                    if (obj.data.length == 3) {
                                        userinfo.province = obj.data[0];
                                        userinfo.city = obj.data[1];
                                        userinfo.district = obj.data[2];
                                    } else {
                                        userinfo.province = obj.data[0];
                                        userinfo.city = obj.data[0];
                                        userinfo.district = obj.data[2];
                                    }
                                    App.updateUserInfo(userinfo);
                                }
                            }
                        });
                    } else if (pickViewType == 1) {
                        if ($('#livingPlace').attr("data-old") != obj.data.join(" ")) {
                            $('#livingPlace .txt-color').html(obj.data.join(" "));
                            userInfoUpdate("livingPlace", obj.data.join(" "));
                        }
                    } else if (pickViewType == 2) {
                        if ($('#birthPlace').attr("data-old") != obj.data.join(" ")) {
                            $('#birthPlace .txt-color').html(obj.data.join(" "));
                            userInfoUpdate("birthPlace", obj.data.join(" "));
                        }
                    }
                }
                uexImage.onCropperClosed = function(data) {
                    App.Logs("uexImage.onCropperClosed:" + data);
                    var obj = App.toJson(data);
                    if (obj.isCancelled == false || obj.isCancelled == "false") {
                        uploadImg(obj.data);
                    }
                }

                uexCamera.cbOpen = function(opId, dataType, data) {
                    if (!App.isNull(data)) {
                        var params = {
                            src : data,
                            quality : 0.8,
                            usePng : false,
                            mode : 1
                        }
                        uexImage.openCropper(App.toJsonStr(params));
                    }
                }

                uexImage.onPickerClosed = function(data) {
                    var obj = JSON.parse(data);
                    if (!obj.isCancelled) {
                        var pic = obj.data[0];
                        var params = {
                            src : pic,
                            quality : 0.8,
                            usePng : false,
                            mode : 1
                        }
                        uexImage.openCropper(App.toJsonStr(params));
                    }
                };
            }
            uexWindow.cbActionSheet = function(opId, dataType, data) {
                var sex = 2;
                switch (parseInt(data)) {
                case 0:
                    if (type == 0) {
                        uexCamera.open(0, 80);
                    } else if (type == 1) {
                        sex = 0;
                        $('#sex .txt-color').html("女");
                    } else {
                        $('#sex1 .txt-color').html("女士");
                    }
                    break;
                case 1:
                    if (type == 0) {
                        var data = {
                            min : 1,
                            max : 1,
                            quality : 0.8,
                            usePng : false,
                            detailedInfo : false
                        }
                        var json = JSON.stringify(data);
                        uexImage.openPicker(json);
                    } else if (type == 1) {
                        sex = 1;
                        $('#sex .txt-color').html("男");
                    } else {
                        $('#sex1 .txt-color').html("先生");
                    }
                    break;
                }
                if (type == 1 && sex != 2) {
                    //如果是性别，则更新数据库
                    App.authApi({
                        url : "user/updateUserInfo",
                        data : {
                            params : {
                                userId : userinfo.userid,
                                updateKey : "sex",
                                updateVal : sex == 1 ? "男" : "女"
                            }
                        },
                        callBack : function(data) {

                        }
                    });
                }
            }
            loadData();
        })
        function loadOptionData() {
            var position = "<option value='请选择现任职务'>请选择现任职务</option>";
            var certlv = "<option value='请选择证书等级'>请选择证书等级</option>";
            for (var i = 0; i < certificateTypeArray.length; i++) {
                certlv += "<option value=" + certificateTypeArray[i] + ">" + certificateTypeArray[i] + "</option>";
            };
            for (var i = 1; i < positionArray.length; i++) {
                position += "<option value=" + positionArray[i] + ">" + positionArray[i] + "</option>";
            };
            $("#jobTitle select").html(position);
            $("#certificateLv select").html(certlv);
        }

        function loadData() {
            userinfo = App.getUserInfo();
            loadOptionData();
            if (!App.isNull(userinfo)) {
                //if (!App.isNull(userinfo.headuri)) {
                var headuri = App.isNull(userinfo.headuri) ? "../wgtRes/comImg.png" : userinfo.headuri;
                if (headuri.substr(0, 4) != "http" && headuri.substr(0, 3) != "../") {
                    headuri = App.headUri + userinfo.headuri;
                }
                $('#headUri').children().removeClass('userHeader');
                $('#headUri').css('background-image', 'url(' + headuri + ')');
                //}
                if (!App.isNull(userinfo.cnname)) {
                    $('#cnName').val(userinfo.cnname);
                    $('#cnName').attr("data-old", userinfo.cnname);
                    if (userinfo.auditstatus == 2) {
                        $('#cnName').attr("readonly", true);
                    }
                }
                if (App.getUserType() == 0) {
                    $("#resumeStatus").removeClass("uhide");
                    $("#otherMsg").removeClass("uhide");
                    if (!App.isNull(userinfo.idcode)) {
                        $("#idCode .txt-color").html(userinfo.idcode);
                    }
                    if (!App.isNull(userinfo.sex)) {
                        $("#sex .txt-color").html(userinfo.sex);
                    }
                    if (!App.isNull(userinfo.birthday)) {
                        $("#birthday .txt-color").html(userinfo.birthday);
                        $("#birthday").attr("data-old", userinfo.birthday);
                    }
                    if (!App.isNull(userinfo.livingplace)) {
                        $("#livingPlace .txt-color").html(userinfo.livingplace);
                        $("#livingPlace").attr("data-old", userinfo.livingplace);
                    }
                    if (!App.isNull(userinfo.birthplace)) {
                        $("#birthPlace .txt-color").html(userinfo.birthplace);
                        $("#birthPlace").attr("data-old", userinfo.birthplace);
                    }
                    if (!App.isNull(userinfo.jobtitle)) {
                        $("#jobTitle .txt-color").html(userinfo.jobtitle);
                        $("#jobTitle").attr("data-old", userinfo.jobtitle);
                        $("[value='" + userinfo.jobtitle + "']").attr("selected", true);
                    }
                    if (!App.isNull(userinfo.certificatelv)) {
                        $("#certificateLv .txt-color").html(userinfo.certificatelv);
                        $("#certificateLv").attr("data-old", userinfo.certificatelv);
                        $("[value='" + userinfo.certificatelv + "']").attr("selected", true);
                    }
                    if (!App.isNull(userinfo.nation)) {
                        $("#nation").val(userinfo.nation);
                        $("#nation").attr("data-old", userinfo.nation);
                    }
                    if (!App.isNull(userinfo.bodyheight)) {
                        $("#bodyHeight").val(userinfo.bodyheight);
                        $("#bodyHeight").attr("data-old", userinfo.bodyheight);
                    }
                    if (!App.isNull(userinfo.school)) {
                        $("#school").val(userinfo.school);
                        $("#school").attr("data-old", userinfo.school);
                    }
                    if (App.isNull(userinfo.profession)) {
                        $("#profession .txt-color").html("请选择所学专业");
                        $("#profession").attr("data-old", "请选择所学专业");
                    } else {
                        $("#profession .txt-color").html(userinfo.profession);
                        $("#profession").attr("data-old", userinfo.profession);
                        $("[value='" + userinfo.profession + "']").attr("selected", true);
                    }
                    if (!App.isNull(userinfo.graduationdate)) {
                        $("#graduationDate .txt-color").html(userinfo.graduationdate);
                        $("#graduationDate").attr("data-old", userinfo.graduationdate);
                    }
                    if (!App.isNull(userinfo.shipexp)) {
                        $("#shipExp").val(userinfo.shipexp);
                        $("#shipExp").attr("data-old", userinfo.shipexp);
                    }
                    if (App.isNull(userinfo.foreignlanguage)) {
                        $("#foreignLanguage .txt-color").html("请选择外语水平");
                        $("#foreignLanguage").attr("data-old", "请选择外语水平");
                    } else {
                        $("#foreignLanguage .txt-color").html(userinfo.foreignlanguage);
                        $("#foreignLanguage").attr("data-old", userinfo.foreignlanguage);
                        $("[value='" + userinfo.foreignlanguage + "']").attr("selected", true);
                    }
                    if (!App.isNull(userinfo.specskill)) {
                        $("#specSkill").val(userinfo.specskill);
                        $("#specSkill").attr("data-old", userinfo.specskill);
                    }
                    if (!App.isNull(userinfo.resumestatus)) {
                        $("#resumeStatus .txt-color").html(userinfo.resumestatus);
                        $("#resumeStatus").attr("data-old", userinfo.resumestatus);
                        $("[value='" + userinfo.resumestatus + "']").attr("selected", true);
                    }
                    if (!App.isNull(userinfo.resumeremark)) {
                        $("#resumeRemark").val(userinfo.resumeremark);
                        $("#resumeRemark").attr("data-old", userinfo.resumeremark);
                    }
                    if (!App.isNull(userinfo.mobile)) {
                        $('#mobile .txt-color').html(userinfo.mobile);
                    }
                    if (!App.isNull(userinfo.email)) {
                        $('#email').val(userinfo.email);
                        $('#email').attr("data-old", userinfo.email);
                    }
                    if (!App.isNull(userinfo.qq)) {
                        $('#QQ').val(userinfo.qq);
                        $('#QQ').attr("data-old", userinfo.qq);
                    }
                    if (!App.isNull(userinfo.wechat)) {
                        $('#wechat').val(userinfo.wechat);
                        $('#wechat').attr("data-old", userinfo.wechat);
                    }
                } else {
                    $("#enterprise").removeClass("uhide");
                    $("#compName").html("企业名");
                    $('#cnName').attr("placeholder", "请输入企业名(必填)");
                    $("#compArea").removeClass("uhide");
                    $("#compAddr").removeClass("uhide");
                    if (!App.isNull(userinfo.comptype)) {
                        $("#compType .txt-color").html(userinfo.comptype);
                        $("#compType").attr("data-old", userinfo.comptype);
                        $("[value='" + userinfo.comptype + "']").attr("selected", true);
                    }
                    if (!App.isNull(userinfo.comparea)) {
                        $('#compArea .txt-color').html(userinfo.comparea);
                        $('#compArea').attr("data-old", userinfo.comparea);
                    }
                    if (!App.isNull(userinfo.compaddr)) {
                        $('#compAddr .txt-color').html(userinfo.compaddr);
                        $('#compAddr').attr("data-old", userinfo.compaddr);
                    }
                    if (!App.isNull(userinfo.compweburl)) {
                        $('#compWebUrl').val(userinfo.compweburl);
                        $('#compWebUrl').attr("data-old", userinfo.compweburl);
                    }
                    if (!App.isNull(userinfo.compremark)) {
                        $('#compRemark').val(userinfo.compremark);
                    }
                    getUserContactList();
                }
            }
        }

        function getUserContactList() {
            App.authApi({
                url : "user/getUserContactList",
                data : {
                    params : {
                        userId : userinfo.userid,
                        page : 1,
                        pageSize : 5
                    }
                },
                callBack : function(data) {
                    if (data.code == 0) {
                        var d = '';
                        if (data.items.dataList.length > 0) {
                            for (var i = 0; i < data.items.dataList.length; i++) {
                                d += createContactHtml(data.items.dataList[i]);
                            }
                            $("#contactList ul").html(d);
                        }
                    } 
                }
            });
        }

        function createContactHtml(obj) {
            var h = '';
            h += '<li onclick="openContatList()" class="ub uinn ub-f1 ubb bc-border">';
            h += '   <div class="ub-f1 ub marg-l ub-ac">';
            h += '      <div class="ub umar-r ulev-5 ut-s">' + obj.contactname + '</div>';
            h += '      <div class="ulev-5 ut-s umar-r">' + obj.jobtitle + '</div>';
            h += '      <div class="ulev-5 ut-s">' + obj.mobile + '</div>';
            h += '   </div>';
            h += '   <div class="ub ub-ac ub-pe fa fa-angle-right ulev2 t-gra"></div>';
            h += '</li>';
            return h;
        }

        function openContatList() {
            App.openWin({
                backName : 'userInfo',
                name : 'userContactList',
                url : 'userContactList.html',
                type : 4,
                aniId : 2,
                animDuration : 200
            });
        }


        appcan.button("#birthday", '', function() {
            var date = appcan.trim($(this).find(".txt-color").html());
            var old = $(this).attr("data-old");
            var year = new Date().getFullYear();
            var month = new Date().getMonth() + 1;
            var day = new Date().getDate();
            if (date != "请选择出生日期") {
                date = date.split("-");
                year = date[0];
                month = date[1];
                day = date[2];
            }
            uexControl.cbOpenDatePicker = function(opId, dataType, data) {
                var obj = App.toJson(data);
                var reStr = obj.year + "-" + (obj.month < 10 ? "0" + obj.month : obj.month) + "-";
                reStr += obj.day < 10 ? "0" + obj.day : obj.day;
                App.Logs(reStr + "," + old);
                if (old != reStr) {
                    userInfoUpdate("birthday", reStr);
                    $("#birthday .txt-color").html(reStr);
                }
            }
            uexControl.openDatePicker(year, month, day);
        })
        $("#nation").blur(function() {
            if ($("#nation").attr("data-old") != appcan.trim($("#nation").val())) {
                userInfoUpdate("nation", appcan.trim($("#nation").val()));
            }
        })
        $("#bodyHeight").blur(function() {
            if ($("#bodyHeight").attr("data-old") != appcan.trim($("#bodyHeight").val())) {
                userInfoUpdate("bodyHeight", appcan.trim($("#bodyHeight").val()));
            }
        })
        $("#school").blur(function() {
            if ($("#school").attr("data-old") != appcan.trim($("#school").val())) {
                userInfoUpdate("school", appcan.trim($("#school").val()));
            }
        })
        $("#shipExp").blur(function() {
            if ($("#shipExp").attr("data-old") != appcan.trim($("#shipExp").val())) {
                userInfoUpdate("shipExp", appcan.trim($("#shipExp").val()));
            }
        })
        $("#specSkill").blur(function() {
            if ($("#specSkill").attr("data-old") != appcan.trim($("#specSkill").val())) {
                userInfoUpdate("specSkill", appcan.trim($("#specSkill").val()));
            }
        })
        $("#resumeRemark").blur(function() {
            if ($("#resumeRemark").attr("data-old") != appcan.trim($("#resumeRemark").val())) {
                userInfoUpdate("resumeRemark", appcan.trim($("#resumeRemark").val()));
            }
        })
        function userInfoUpdate(key, value) {
            App.authApi({
                url : "user/updateUserInfo",
                data : {
                    params : {
                        userId : userinfo.userid,
                        updateKey : key,
                        updateVal : value
                    }
                },
                callBack : function(data) {
                    if (data.code == 0) {
                        $("#" + key).attr("data-old", value);
                    }
                }
            });
        }


        appcan.button("#livingPlace", '', function() {
            pickViewType = 1;
            var compArea = appcan.trim($(this).find(".txt-color").html());
            compArea = App.isNull(compArea) ? "" : compArea;
            var select = [0, 0, 0];
            if (compArea != "点击设置现居住地") {
                compArea = compArea.split(" ");
                if (compArea.length > 2) {
                    select = getSelect(compArea[0], compArea[1], compArea[2]);
                } else {
                    select = getSelect(compArea[0], compArea[0], compArea[1]);
                }
                App.Logs("select:" + App.toJsonStr(select));
            }
            var params = {};
            if (App.getAppPlat()) {
                params = {
                    src : "res://citys.json",
                    select : select
                };
            } else {
                var y = screen.availHeight - 280;
                params = {
                    x : 0,
                    y : y,
                    width : window.innerWidth,
                    height : 300,
                    src : "res://citys.json",
                    select : select
                };
            }
            App.Logs("uexWheelPickView.open:" + App.toJsonStr(params));
            uexWheelPickView.open(JSON.stringify(params));
        })

        appcan.button('#birthPlace', '', function() {
            pickViewType = 2;
            var compArea = appcan.trim($(this).find(".txt-color").html());
            var select = [0, 0, 0];
            if (compArea != "点击设置籍贯") {
                compArea = compArea.split(" ");
                if (compArea.length > 2) {
                    select = getSelect(compArea[0], compArea[1], compArea[2]);
                } else {
                    select = getSelect(compArea[0], compArea[0], compArea[1]);
                }
                App.Logs("select:" + App.toJsonStr(select));
            }
            var params = {};
            if (App.getAppPlat()) {
                params = {
                    src : "res://citys.json",
                    select : select
                };
            } else {
                var y = screen.availHeight - 280;
                params = {
                    x : 0,
                    y : y,
                    width : window.innerWidth,
                    height : 300,
                    src : "res://citys.json",
                    select : select
                };
            }
            App.Logs("uexWheelPickView.open:" + App.toJsonStr(params));
            uexWheelPickView.open(JSON.stringify(params));
        })

        appcan.select(".select", function(ele, value) {
            var id = ele.attr("data-id");
            var valueText = value;
            if (valueText != $("#" + id).attr("data-old")) {
                if (id == "resumeStatus") {
                    appcan.window.confirm({
                        title : '提醒',
                        content : '确定要修改自己的状吗?修改后可能会影响到您的相关招聘信息。',
                        buttons : ['我要修改', '暂不修改'],
                        callback : function(err, data, dataType, optId) {
                            if (err) {
                                return;
                            }
                            if (parseInt(data) == 0) {
                                App.authApi({
                                    url : "user/updateUserInfo",
                                    data : {
                                        params : {
                                            userId : userinfo.userid,
                                            updateKey : id,
                                            updateVal : valueText
                                        }
                                    },
                                    callBack : function(data) {
                                        if (data.code == 0) {
                                            userinfo[id.toLowerCase()] = valueText;
                                            $("#" + id).attr("data-old", valueText);
                                            userinfo = App.updateUserInfo(userinfo);
                                            App.evalJs({
                                                winName : "indexNew",
                                                frameName : "content",
                                                popName : "myinfo_content",
                                                type : 2,
                                                js : "loadData()"
                                            })
                                        }
                                    }
                                });
                            } else {
                                var txt = appcan.trim($("#" + id).attr("data-old"));
                                $("#" + id + " .txt-color").html(txt);
                                $("#" + id + " option").each(function() {
                                    if ($(this)[0].value == txt) {
                                        $(this)[0].selected = true;
                                    } else {
                                        $(this)[0].selected = false;
                                    }
                                });
                            }
                        }
                    });
                } else {
                    App.authApi({
                        url : "user/updateUserInfo",
                        data : {
                            params : {
                                userId : userinfo.userid,
                                updateKey : id,
                                updateVal : valueText
                            }
                        },
                        callBack : function(data) {
                            if (data.code == 0) {
                                userinfo[id.toLowerCase()] = valueText;
                                $("#" + id).attr("data-old", valueText);
                                userinfo = App.updateUserInfo(userinfo);
                            }
                        }
                    });
                }
            }
        });

        function getUserDefaultContact(userId) {
            App.authApi({
                url : 'user/getUserDefalutContat',
                data : {
                    params : {
                        userId : userId
                    }
                },
                callBack : function(data) {
                    if (data.code == 0) {
                        if (App.isNull(data.items.id)) {
                            $('#mobile .txt-color').html(userinfo.mobile);
                        } else {
                            $("#contactName").attr("data-id", data.items.id);
                            $("#contactName").val(data.items.contactname);
                            $('#sex1 .txt-color').html(data.items.sex);
                            $("#position").val(data.items.jobtitle);
                            $('#mobile .txt-color').html(data.items.mobile);
                            $('#email').val(data.items.email);
                            $('#QQ').val(data.items.qq);
                            $('#wechat').val(data.items.wechat);
                        }
                    } else {
                        App.toast(data.message);
                    }
                }
            });
        }

        function uploadImg(pic) {
            App.openLoading({
                title : "",
                msg : "正在更新头像...请稍后...",
                canCancel : 1
            });
            App.uploadTMPFile(pic, 2, 480, function(status, obj) {
                App.Logs("uploadImg:" + status + "," + App.toJsonStr(obj));
                if (status == 1) {
                    uexFileMgr.deleteFileByPath(pic);
                    App.authApi({
                        url : 'user/updateUserLogo',
                        data : {
                            params : {
                                userId : userinfo.userid,
                                fileName : obj.serverPath,
                                imageType : "1"
                            }
                        },
                        callBack : function(data) {
                            App.closeLoading();
                            if (data.code == 0) {
                                userinfo.headuri = data.items.logo;
                                userinfo = App.updateUserInfo(userinfo);
                                $('#headUri').css('background-image', 'url(' + App.headUri + userinfo.headuri + ')');
                                $('#headUri').children().removeClass('userHeader');
                            } else {
                                App.alertEx(data.message);
                            }
                        }
                    })
                }
            })
        }


        $("#compRemark").blur(function() {
            var compRemark = appcan.trim($('#compRemark').val());
            if (!App.isNull(compRemark)) {
                App.authApi({
                    url : "user/updateUserInfo",
                    data : {
                        params : {
                            userId : userinfo.userid,
                            updateKey : "compRemark",
                            updateVal : compRemark
                        }
                    },
                    callBack : function(data) {
                        if (data.code == 0) {
                            userinfo.compremark = compRemark;
                            userinfo = App.updateUserInfo(userinfo);
                        }
                    }
                });
            } else {
                App.toast("请输入公司简介");
            }
        })

        $("#compWebUrl").blur(function() {
            var compWebUrl = appcan.trim($('#compWebUrl').val());
            var old = $("#compWebUrl").attr("data-old");
            if (old == compWebUrl) {
                return;
            }
            if (!App.isNull(compWebUrl)) {
                App.authApi({
                    url : "user/updateUserInfo",
                    data : {
                        params : {
                            userId : userinfo.userid,
                            updateKey : "compWebUrl",
                            updateVal : compWebUrl
                        }
                    },
                    callBack : function(data) {
                        if (data.code == 0) {
                            userinfo.compweburl = compWebUrl;
                            $("#compWebUrl").attr("data-old", compWebUrl);
                            userinfo = App.updateUserInfo(userinfo);
                        }
                    }
                });
            }
        })

        $('#cnName').blur(function() {
            var cnName = appcan.trim($('#cnName').val());
            var oldName = $("#cnName").attr("data-old");
            if (cnName == oldName) {
                return;
            }
            if (App.isNull(cnName)) {
                App.toast("为了方便您获得更好的信息，请填写" + $("#compName").html());
                return;
            }
            if (userinfo.auditstatus == 2 && App.getUserType() == 0) {
                App.toast("您已通过实现认证，姓名不能被修改");
                return;
            }
            var needCheck = App.getUserType() > 0 ? true : false;
            App.authApi({
                url : "user/updateUserInfo",
                data : {
                    params : {
                        userId : userinfo.userid,
                        updateKey : "cnName",
                        updateVal : cnName,
                        needCheck : needCheck
                    }
                },
                callBack : function(data) {
                    //console.log(data)
                    if (data.code == 0) {
                        userinfo.cnname = cnName;
                        $("#cnName").attr("data-old", cnName);
                        userinfo = App.updateUserInfo(userinfo);
                        if (!isdebug) {
                            var nickname = {
                                nickname : cnName
                            };
                            uexEasemob.updateCurrentUserNickname(App.toJsonStr(nickname));
                        }
                    } else if (data.code == 405) {
                        App.toast(data.message);
                    }
                }
            });
        });

        $('#email').blur(function() {
            if (App.getUserType() > 0) {
                return;
            }
            var email = appcan.trim($('#email').val());
            var old = $("#email").attr("data-old");
            if (old == email) {
                return;
            }
            App.authApi({
                url : "user/updateUserInfo",
                data : {
                    params : {
                        userId : userinfo.userid,
                        updateKey : "email",
                        updateVal : email
                    }
                },
                callBack : function(data) {
                    if (data.code == 0) {
                        userinfo.email = email;
                        $("#email").attr("data-old", email);
                        userinfo = App.updateUserInfo(userinfo);
                    }
                }
            });
        })

        $('#QQ').blur(function() {
            if (App.getUserType() > 0) {
                return;
            }
            var qq = appcan.trim($('#QQ').val());
            var old = $("#QQ").attr("data-old");
            if (old == qq) {
                return;
            }
            App.authApi({
                url : "user/updateUserInfo",
                data : {
                    params : {
                        userId : userinfo.userid,
                        updateKey : "qq",
                        updateVal : qq
                    }
                },
                callBack : function(data) {
                    if (data.code == 0) {
                        userinfo.qq = qq;
                        $("#QQ").attr("data-old", qq);
                        userinfo = App.updateUserInfo(userinfo);
                    }
                }
            });
        })

        $('#wechat').blur(function() {
            if (App.getUserType() > 0) {
                return;
            }
            var wechat = appcan.trim($('#wechat').val());
            var old = $("#wechat").attr("data-old");
            if (old == wechat) {
                return;
            }
            App.authApi({
                url : "user/updateUserInfo",
                data : {
                    params : {
                        userId : userinfo.userid,
                        updateKey : "wechat",
                        updateVal : wechat
                    }
                },
                callBack : function(data) {
                    if (data.code == 0) {
                        userinfo.wechat = wechat;
                        $("#wechat").attr("data-old", wechat);
                        userinfo = App.updateUserInfo(userinfo);
                    }
                }
            });
        })
        function setUserAddr(addr) {
            if (!App.isNull(addr)) {
                $('#compAddr .txt-color').html(addr);
                userinfo.compaddr = addr;
                userinfo = App.updateUserInfo(userinfo);
            }
        }


        appcan.button('#compAddr', '', function() {
            App.openWin({
                backName : "userInfo",
                name : 'inputAddr',
                url : '../common/inputAddr.html',
                type : 4,
                aniId : 2,
                animDuration : 200
            })
        })

        appcan.button('#sex', '', function() {
            type = 1;
            uexWindow.actionSheet("选择性别", "取消", "女,男");
        })

        appcan.button('#sex1', '', function() {
            type = 2;
            uexWindow.actionSheet("选择性别", "取消", "女士,先生");
        })

        appcan.button('#headUri', '', function() {
            type = 0;
            uexWindow.actionSheet("菜单", "取消", "拍照,从相册选择");
        })
        function getSelect(prov, city, dist) {
            var select = [];
            for (var i = 0; i < myCitys.length; i++) {
                if (myCitys[i].name == prov) {
                    select.push(i);
                    if (!App.isNull(myCitys[i].sub)) {
                        if (prov == city) {
                            for (var j = 0; j < myCitys[i].sub.length; j++) {
                                if (myCitys[i].sub[j].name == dist) {
                                    select.push(j);
                                    break;
                                };
                            };
                        } else {
                            for (var j = 0; j < myCitys[i].sub.length; j++) {
                                if (myCitys[i].sub[j].name == city) {
                                    select.push(j);
                                    if (!App.isNull(myCitys[i].sub[j].sub)) {
                                        for (var k = 0; k < myCitys[i].sub[j].sub.length; k++) {
                                            if (myCitys[i].sub[j].sub[k] == dist) {
                                                select.push(k);
                                                break;
                                            };
                                        };
                                    }
                                    break;
                                };
                            };
                        }
                    }
                    break;
                };
            };
            return select;
        }


        appcan.button("#graduationDate", '', function() {
            var date = appcan.trim($(this).find(".txt-color").html());
            var year = new Date().getFullYear();
            var month = new Date().getMonth() + 1;
            if (date != "点击设置毕业时间") {
                date = date.split("-");
                year = date[0];
                month = date[1];
            }
            uexControl.cbOpenDatePickerWithoutDay = function(opId, dataType, data) {
                App.Logs("uexControl.cbOpenDatePickerWithoutDay:" + data);
                var obj = App.toJson(data);
                var reStr = obj.year + "-" + (obj.month < 10 ? "0" + obj.month : obj.month);
                if (reStr != $("#graduationDate").attr("data-old")) {
                    $("#graduationDate .txt-color").html(reStr);
                    userInfoUpdate("graduationDate", reStr);
                }
            }
            uexControl.openDatePickerWithoutDay(year, month);
        })

        appcan.button('#compArea', '', function() {
            pickViewType = 3;
            var compArea = appcan.trim($(this).find(".txt-color").html());
            var select = [0, 0, 0];
            if (compArea != "点击选择所在地区") {
                compArea = compArea.split(" ");
                if (compArea.length > 2) {
                    select = getSelect(compArea[0], compArea[1], compArea[2]);
                } else {
                    select = getSelect(compArea[0], compArea[0], compArea[1]);
                }
                App.Logs("select:" + App.toJsonStr(select));
            }
            var params = {};
            if (App.getAppPlat()) {
                params = {
                    src : "res://citys.json",
                    select : select
                };
            } else {
                var y = screen.availHeight - 280;
                params = {
                    x : 0,
                    y : y,
                    width : window.innerWidth,
                    height : 300,
                    src : "res://citys.json",
                    select : select
                };
            }
            App.Logs("uexWheelPickView.open:" + App.toJsonStr(params));
            uexWheelPickView.open(JSON.stringify(params));
        })
        function compelete() {
            if (App.isNull(appcan.trim($('#cnName').val()))) {
                App.toast("为了方便您获得更好的资源，请填写" + $("#compName").html());
                return;
            }
            var contactName = appcan.trim($("#contactName").val());
            var compRemark = appcan.trim($("#compRemark").val());
            var jobTitle = appcan.trim($("#position").val());
            var email = appcan.trim($("#email").val());
            var qq = appcan.trim($("#QQ").val());
            var wechat = appcan.trim($("#wechat").val());
            var sex = appcan.trim($("#sex1 .txt-color").html());
            var mobile = appcan.trim($("#mobile .txt-color").html());
            var compType = appcan.trim($("#compType select")[0].value);
            var id = App.isNull($("#contactName").attr("data-id")) ? "0" : $("#contactName").attr("data-id");
            if (App.getUserType() > 0) {
                if (App.isNull(compRemark)) {
                    App.toast("为了方便您获得更好的资源，请填写公司简介.");
                    return;
                }
                if (App.isNull(compType) || compType == "请选择公司性质") {
                    App.toast("请选择公司性质");
                    return;
                }
                /*if (App.isNull(contactName)) {
                 App.toast("默认联系人不能为空.");
                 return;
                 }
                 if (sex == "请选择性别" || App.isNull(sex)) {
                 if (App.isNull(contactName)) {
                 App.toast("请先选择联系人性别");
                 return;
                 }
                 }
                 if (App.isNull(jobTitle)) {
                 App.toast("部门/职位不能为空.");
                 return;
                 }
                 if (App.isNull(email) || !App.isEmail(email)) {
                 App.toast("请输入正确电子邮件.");
                 return;
                 }
                 App.authApi({
                 url : "user/updateUserContact",
                 data : {
                 params : {
                 userId : userinfo.userid,
                 contactName : contactName,
                 jobTitle : jobTitle,
                 email : email,
                 qq : qq,
                 wechat : wechat,
                 sex : sex,
                 mobile : mobile,
                 id : id
                 }
                 },
                 callBack : function(data) {
                 }
                 });*/
            } else {
                var idCode = appcan.trim($("#idCode .txt-color").html());
                var sex = appcan.trim($("#sex .txt-color").html());
                var birthday = appcan.trim($("#birthday .txt-color").html());
                var livingPlace = appcan.trim($("#livingPlace .txt-color").html());
                var jobTitle = appcan.trim($("#jobTitle .txt-color").html());
                var certificateLv = appcan.trim($("#certificateLv .txt-color").html());
                var birthPlace = appcan.trim($("#birthPlace .txt-color").html());
                var resumeStatus = appcan.trim($("#resumeStatus .txt-color").html());
                if (App.isNull(idCode) || idCode == "点击设置身份证号") {
                    App.toast("身份证号不能为空");
                    return;
                }
                if (App.isNull(sex) || sex == "请选择性别") {
                    App.toast("请选择性别");
                    return;
                }
                if (App.isNull(birthday) || birthday == "请选择出生日期") {
                    App.toast("请选择出生日期");
                    return;
                }
                if (App.isNull(livingPlace) || livingPlace == "点击设置现居住地") {
                    App.toast("请设置现居住地");
                    return;
                }
                if (App.isNull(resumeStatus) || resumeStatus == "请选择求职状态") {
                    App.toast("请选择求职状态");
                    return;
                }
            }
            App.removeVal('userLabel');
            App.removeVal('userType');
            App.openWin({
                backName : 'root',
                name : 'indexNew',
                url : '../indexNew.html',
                type : 4,
                aniId : 2,
                animDuration : 200
            });
            //console.log(fristRun)

        }

        function updateInfo() {
            var inputOpts = App.getJson('inputOpts');
            if (!App.isNull(inputOpts)) {
                $(inputOpts.selector).html(inputOpts.text);
                userinfo.idcode = inputOpts.text;
                App.updateUserInfo(userinfo);
            }
        }


        appcan.button('#idCode', '', function() {
            var text = appcan.trim($("#idCode .txt-color").html())
            if (text != "点击设置身份证号" && !App.isNull(text)) {
                App.toast("身份证号不能修改");
                return;
            }
            App.alertEx("身份证号一经设置，将不能在修改！", function() {
                App.openInputWin({
                    winName : "userInfo",
                    title : "设置身份证号",
                    callBack : "updateInfo()",
                    method : "idCode",
                    selector : '#idCode .txt-color',
                    txtLength : 20,
                    update : true,
                    type : "text"
                });
            })
        });
    </script>
</html>